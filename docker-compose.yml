services:
  tg-relay:
    build:
      context: .
      args:
        PIP_INDEX_URL: ${PIP_INDEX_URL:-}
        HTTP_PROXY: ${HTTP_PROXY:-}
        HTTPS_PROXY: ${HTTPS_PROXY:-}
        NO_PROXY: ${NO_PROXY:-}
    image: tg-relay:latest
    container_name: tg-relay
    restart: unless-stopped
    # 读取环境变量（BOT_TOKEN, ADMIN_IDS 等）
    env_file:
      - .env
    working_dir: /app
    # 挂载当前目录，便于持久化 channels.json 等文件
    volumes:
      - ./:/app
    command: ["python", "-u", "simple_relay.py"]
